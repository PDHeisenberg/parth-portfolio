/* ===== Lightbulb Theme Toggle ===== */

/* ===== Dark Mode Variables ===== */
[data-theme="dark"] {
  --color-bg: #0D0D0D;
  --color-bg-card: #1A1A1A;
  --color-accent: #D4FF00;
  --color-accent-hover: #E5FF40;
  --color-accent-glow: rgba(212, 255, 0, 0.25);
  --color-text-primary: #F5F5E9;
  --color-text-secondary: #9A9A9A;
  --color-border: #2A2A2A;
}

/* Light-specific variables */
:root {
  --light-color: #FFFBEA;
  --light-glow: rgba(255, 251, 234, 0.8);
  --bulb-filament: #FFB800;
  --bulb-filament-off: #444444;
  --bulb-glass-on: rgba(255, 251, 234, 0.95);
  --bulb-glass-off: rgba(40, 40, 40, 0.8);
  --cord-color: #1A1A1A;
}

[data-theme="dark"] {
  --cord-color: #F5F5E9;
}

/* ===== Lightbulb Toggle Container ===== */
.lightbulb-toggle {
  position: fixed;
  top: 0;
  right: 40px;
  z-index: 1001;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* ===== Cord ===== */
.cord-container {
  position: relative;
  width: 24px;
  height: 70px;
}

.cord {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.cord-path {
  fill: none;
  stroke: var(--cord-color);
  stroke-width: 2;
  stroke-linecap: round;
  transition: stroke 0.5s ease;
}

.pull-handle {
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 14px;
  height: 14px;
  background: var(--color-accent);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(212, 255, 0, 0.4);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.pull-handle:hover {
  transform: translateX(-50%) scale(1.1);
  box-shadow: 0 4px 12px rgba(212, 255, 0, 0.6);
}

/* ===== Bulb Container ===== */
.bulb-container {
  position: relative;
  width: 50px;
  height: 70px;
  transform-origin: top center;
}

.bulb {
  width: 100%;
  height: 100%;
  overflow: visible;
}

/* Socket */
.bulb-socket {
  fill: #2A2A2A;
}

.bulb-socket-thread {
  fill: #3A3A3A;
}

/* Glass */
.bulb-glass {
  fill: var(--bulb-glass-on);
  stroke: rgba(255, 255, 255, 0.3);
  stroke-width: 1;
  transition: fill 0.5s ease;
}

[data-theme="dark"] .bulb-glass {
  fill: var(--bulb-glass-off);
  stroke: rgba(255, 255, 255, 0.1);
}

/* Filament */
.bulb-filament {
  fill: none;
  stroke: var(--bulb-filament);
  stroke-width: 2;
  stroke-linecap: round;
  opacity: 1;
  filter: drop-shadow(0 0 4px var(--bulb-filament));
  transition: opacity 0.3s ease, stroke 0.3s ease, filter 0.3s ease;
}

[data-theme="dark"] .bulb-filament {
  stroke: var(--bulb-filament-off);
  opacity: 0.3;
  filter: none;
}

/* Light Rays */
.bulb-rays line {
  stroke: var(--light-color);
  stroke-width: 2;
  stroke-linecap: round;
  opacity: 0.7;
  transition: opacity 0.4s ease;
}

[data-theme="dark"] .bulb-rays line {
  opacity: 0;
}

/* ===== Glow Effect ===== */
.light-glow {
  position: absolute;
  top: 25px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 100px;
  background: radial-gradient(circle, var(--light-glow) 0%, transparent 70%);
  border-radius: 50%;
  opacity: 0.9;
  pointer-events: none;
  transition: opacity 0.5s ease, transform 0.5s ease;
}

[data-theme="dark"] .light-glow {
  opacity: 0;
  transform: translateX(-50%) scale(0.3);
}

/* ===== Full Page Light Overlay ===== */
.light-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  background: radial-gradient(circle, var(--light-color) 0%, #F5F5E9 70%, #F5F5E9 100%);
  border-radius: 50%;
  pointer-events: none;
  z-index: 999;
  opacity: 0;
  transform: translate(50%, -50%);
  transform-origin: center center;
}

/* Dark overlay for going dark */
.dark-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  background: radial-gradient(circle, #0D0D0D 0%, #0D0D0D 100%);
  border-radius: 50%;
  pointer-events: none;
  z-index: 999;
  opacity: 0;
  transform: translate(50%, -50%);
  transform-origin: center center;
}

/* ===== Animations ===== */
@keyframes filament-glow {
  0%, 100% { 
    filter: drop-shadow(0 0 4px var(--bulb-filament));
  }
  50% { 
    filter: drop-shadow(0 0 10px var(--bulb-filament)) drop-shadow(0 0 20px var(--bulb-filament));
  }
}

@keyframes ray-pulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.9; }
}

@keyframes glow-pulse {
  0%, 100% { 
    opacity: 0.8;
    transform: translateX(-50%) scale(1);
  }
  50% { 
    opacity: 1;
    transform: translateX(-50%) scale(1.15);
  }
}

@keyframes bulb-swing {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(2deg); }
  75% { transform: rotate(-2deg); }
}

/* Apply continuous animations in light mode */
[data-theme="light"] .bulb-filament {
  animation: filament-glow 3s ease-in-out infinite;
}

[data-theme="light"] .bulb-rays line {
  animation: ray-pulse 2s ease-in-out infinite;
}

[data-theme="light"] .light-glow {
  animation: glow-pulse 3s ease-in-out infinite;
}

/* Idle swing animation */
.lightbulb-toggle:not(.is-dragging) .bulb-container {
  animation: bulb-swing 4s ease-in-out infinite;
}

/* ===== Theme Transition Smoothing ===== */
html.theme-transitioning,
html.theme-transitioning *,
html.theme-transitioning *::before,
html.theme-transitioning *::after {
  transition: 
    background-color 0.6s ease,
    color 0.6s ease,
    border-color 0.6s ease,
    box-shadow 0.6s ease,
    fill 0.6s ease,
    stroke 0.6s ease !important;
}

/* ===== Dark Mode Element Styles ===== */

/* Cards */
[data-theme="dark"] .card {
  background-color: var(--color-bg-card);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .card:hover {
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
}

/* Case Study Cards - accent glow on hover */
[data-theme="dark"] .case-study-card:hover {
  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5), 0 0 30px var(--color-accent-glow);
}

/* Phone Mockup Frames */
[data-theme="dark"] .case-study-card .mockup::before {
  background: #2A2A2A;
  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
}

/* Section Labels - glow effect */
[data-theme="dark"] .section-label {
  box-shadow: 0 0 15px var(--color-accent-glow);
}

/* Links & Buttons */
[data-theme="dark"] .resume-link,
[data-theme="dark"] .ai-chat-trigger {
  background: var(--color-bg-card);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .resume-link:hover,
[data-theme="dark"] .ai-chat-trigger:hover {
  background: var(--color-border);
}

/* AI Chat */
[data-theme="dark"] .ai-chat-popup {
  background: var(--color-bg-card);
  box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .ai-message {
  background: var(--color-bg);
}

[data-theme="dark"] .ai-chat-input {
  background: var(--color-bg);
}

[data-theme="dark"] .ai-chat-input:hover {
  background: var(--color-border);
}

/* Profile Card */
[data-theme="dark"] .rotating-text-path {
  fill: var(--color-text-primary);
}

/* LinkedIn - keep brand color, add subtle glow */
[data-theme="dark"] .linkedin-card svg {
  filter: drop-shadow(0 0 8px rgba(10, 102, 194, 0.4));
}

/* Experience List */
[data-theme="dark"] .experience-item {
  border-color: var(--color-border);
}

/* Services */
[data-theme="dark"] .service-slide {
  background: var(--color-bg);
}

/* Scrollbar */
[data-theme="dark"] ::-webkit-scrollbar-track {
  background: var(--color-bg);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: #3A3A3A;
}

/* ===== GPU Acceleration ===== */
.light-overlay,
.dark-overlay,
.bulb-container,
.light-glow,
.pull-handle {
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* ===== Mobile Responsiveness ===== */
@media (max-width: 600px) {
  .lightbulb-toggle {
    right: 20px;
    transform: scale(0.85);
    transform-origin: top right;
  }
  
  .cord-container {
    height: 55px;
  }
  
  .bulb-container {
    width: 42px;
    height: 60px;
  }
}

/* ===== Accessibility ===== */
@media (prefers-reduced-motion: reduce) {
  .lightbulb-toggle *,
  .light-overlay,
  .dark-overlay {
    animation: none !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus styles for keyboard navigation */
.lightbulb-toggle:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 4px;
  border-radius: 8px;
}
